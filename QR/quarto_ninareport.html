<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.4.553">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">

<meta name="keywords" content="ett, två">

<title>Effekter av arealbruk og arealbruksendringer på biodiversitet, økosystemtjenester og karbonlagrin i Norge</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
  vertical-align: middle;
}
/* CSS for syntax highlighting */
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
  }
pre.numberSource { margin-left: 3em;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
</style>


<script src="quarto_ninareport_files/libs/clipboard/clipboard.min.js"></script>
<script src="quarto_ninareport_files/libs/quarto-html/quarto.js"></script>
<script src="quarto_ninareport_files/libs/quarto-html/popper.min.js"></script>
<script src="quarto_ninareport_files/libs/quarto-html/tippy.umd.min.js"></script>
<script src="quarto_ninareport_files/libs/quarto-html/anchor.min.js"></script>
<link href="quarto_ninareport_files/libs/quarto-html/tippy.css" rel="stylesheet">
<link href="quarto_ninareport_files/libs/quarto-html/quarto-syntax-highlighting.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="quarto_ninareport_files/libs/bootstrap/bootstrap.min.js"></script>
<link href="quarto_ninareport_files/libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="quarto_ninareport_files/libs/bootstrap/bootstrap.min.css" rel="stylesheet" id="quarto-bootstrap" data-mode="light">
</head><body><button type="button" class="btn btn-primary btn-lg bi bi-arrow-up" id="btn-back-to-top"></button>

<style>
#btn-back-to-top {
  position: fixed;
  bottom: 20px;
  right: 20px;
  display: none;
}
</style>

<script id="backtotop" type="application/javascript">
let backToTopButton = document.getElementById("btn-back-to-top");

window.addEventListener('scroll', () => {
            if (document.body.scrollTop > 20 || document.documentElement.scrollTop > 20) {
            backToTopButton.style.display = "block";
        } else {
            backToTopButton.style.display = "none";
        }
    });

backToTopButton.addEventListener("click", function () {
  document.body.scrollTop = 0;
  document.documentElement.scrollTop = 0;
});
</script>
<div id="progress-bar" style="width: 0%; height:2px; background-color: rgb(89 127 235);; position: fixed; top: 0px; z-index: 2000;"></div>

<script id="progressbar" type="text/javascript">

document.addEventListener("DOMContentLoaded", function() {

    const bar = document.querySelector('#progress-bar');
    const post = document.querySelector('#quarto-content');
    const html = document.documentElement;
    
    const height = post.scrollHeight + post.offsetTop;
    
    window.addEventListener('scroll', () => {
        bar.style.width = (html.scrollTop / (height- html.clientHeight)) * 100 + '%';
    });
});
</script>
<script src="quarto_ninareport_files/libs/htmlwidgets-1.6.2/htmlwidgets.js"></script>

<script src="quarto_ninareport_files/libs/viz-1.8.2/viz.js"></script>

<link href="quarto_ninareport_files/libs/DiagrammeR-styles-0.2/styles.css" rel="stylesheet">

<script src="quarto_ninareport_files/libs/grViz-binding-1.0.10/grViz.js"></script>

<link href="quarto_ninareport_files/libs/datatables-css-0.0.0/datatables-crosstalk.css" rel="stylesheet">

<script src="quarto_ninareport_files/libs/datatables-binding-0.30/datatables.js"></script>

<script src="quarto_ninareport_files/libs/jquery-3.6.0/jquery-3.6.0.min.js"></script>

<link href="quarto_ninareport_files/libs/dt-core-bootstrap-1.13.4/css/dataTables.bootstrap.min.css" rel="stylesheet">

<link href="quarto_ninareport_files/libs/dt-core-bootstrap-1.13.4/css/dataTables.bootstrap.extra.css" rel="stylesheet">

<script src="quarto_ninareport_files/libs/dt-core-bootstrap-1.13.4/js/jquery.dataTables.min.js"></script>

<script src="quarto_ninareport_files/libs/dt-core-bootstrap-1.13.4/js/dataTables.bootstrap.min.js"></script>

<link href="quarto_ninareport_files/libs/crosstalk-1.2.0/css/crosstalk.min.css" rel="stylesheet">

<script src="quarto_ninareport_files/libs/crosstalk-1.2.0/js/crosstalk.min.js"></script>







<div id="quarto-content" class="page-columns page-rows-contents page-layout-article toc-left">
<div id="quarto-sidebar-toc-left" class="sidebar toc-left">
  <nav id="TOC" role="doc-toc" class="toc-active">
    <h2 id="toc-title">Innhold</h2>
   
  <ul>
  <li><a href="#sec-inl" id="toc-sec-inl" class="nav-link active" data-scroll-target="#sec-inl"><span class="header-section-number">1</span> Innledning</a>
  <ul class="collapse">
  <li><a href="#arealbruk-og-arealbruksendringer-i-norge" id="toc-arealbruk-og-arealbruksendringer-i-norge" class="nav-link" data-scroll-target="#arealbruk-og-arealbruksendringer-i-norge"><span class="header-section-number">1.1</span> Arealbruk og arealbruksendringer i Norge</a></li>
  <li><a href="#involvering-av-brukere-og-samfunnsaktører" id="toc-involvering-av-brukere-og-samfunnsaktører" class="nav-link" data-scroll-target="#involvering-av-brukere-og-samfunnsaktører"><span class="header-section-number">1.2</span> Involvering av brukere og samfunnsaktører</a></li>
  <li><a href="#formålet-med-kunnskapssammenstillingen" id="toc-formålet-med-kunnskapssammenstillingen" class="nav-link" data-scroll-target="#formålet-med-kunnskapssammenstillingen"><span class="header-section-number">1.3</span> Formålet med kunnskapssammenstillingen</a>
  <ul class="collapse">
  <li><a href="#hovedproblemstilling" id="toc-hovedproblemstilling" class="nav-link" data-scroll-target="#hovedproblemstilling"><span class="header-section-number">1.3.1</span> Hovedproblemstilling</a></li>
  <li><a href="#underproblemstillinger" id="toc-underproblemstillinger" class="nav-link" data-scroll-target="#underproblemstillinger"><span class="header-section-number">1.3.2</span> Underproblemstillinger</a></li>
  </ul></li>
  </ul></li>
  <li><a href="#sec-met" id="toc-sec-met" class="nav-link" data-scroll-target="#sec-met"><span class="header-section-number">2</span> Metoder</a>
  <ul class="collapse">
  <li><a href="#avvik-fra-protokollen" id="toc-avvik-fra-protokollen" class="nav-link" data-scroll-target="#avvik-fra-protokollen"><span class="header-section-number">2.1</span> Avvik fra protokollen</a></li>
  <li><a href="#søk-etter-litteratur" id="toc-søk-etter-litteratur" class="nav-link" data-scroll-target="#søk-etter-litteratur"><span class="header-section-number">2.2</span> Søk etter litteratur</a>
  <ul class="collapse">
  <li><a href="#søk-i-online-databaser" id="toc-søk-i-online-databaser" class="nav-link" data-scroll-target="#søk-i-online-databaser"><span class="header-section-number">2.2.1</span> Søk i online databaser</a></li>
  <li><a href="#søketermer-og-søkestreng" id="toc-søketermer-og-søkestreng" class="nav-link" data-scroll-target="#søketermer-og-søkestreng"><span class="header-section-number">2.2.2</span> Søketermer og søkestreng</a></li>
  <li><a href="#test-av-søkets-omfang-og-dekning" id="toc-test-av-søkets-omfang-og-dekning" class="nav-link" data-scroll-target="#test-av-søkets-omfang-og-dekning"><span class="header-section-number">2.2.3</span> Test av søkets omfang og dekning</a></li>
  <li><a href="#ytterligere-søk-etter-litteratur" id="toc-ytterligere-søk-etter-litteratur" class="nav-link" data-scroll-target="#ytterligere-søk-etter-litteratur"><span class="header-section-number">2.2.4</span> Ytterligere søk etter litteratur</a></li>
  <li><a href="#section" id="toc-section" class="nav-link" data-scroll-target="#section"><span class="header-section-number">2.2.5</span> </a></li>
  <li><a href="#sammenstilling-og-håndtering-av-søkeresultater" id="toc-sammenstilling-og-håndtering-av-søkeresultater" class="nav-link" data-scroll-target="#sammenstilling-og-håndtering-av-søkeresultater"><span class="header-section-number">2.2.6</span> Sammenstilling og håndtering av søkeresultater</a></li>
  <li><a href="#screening-av-artikler" id="toc-screening-av-artikler" class="nav-link" data-scroll-target="#screening-av-artikler"><span class="header-section-number">2.2.7</span> Screening av artikler</a></li>
  </ul></li>
  <li><a href="#inkluderings--og-ekskluderingskriterier" id="toc-inkluderings--og-ekskluderingskriterier" class="nav-link" data-scroll-target="#inkluderings--og-ekskluderingskriterier"><span class="header-section-number">2.3</span> Inkluderings- og ekskluderingskriterier</a>
  <ul class="collapse">
  <li><a href="#eligible-interventions" id="toc-eligible-interventions" class="nav-link" data-scroll-target="#eligible-interventions"><span class="header-section-number">2.3.1</span> <strong>Eligible interventions</strong></a></li>
  <li><a href="#eligible-outcomes" id="toc-eligible-outcomes" class="nav-link" data-scroll-target="#eligible-outcomes"><span class="header-section-number">2.3.2</span> <strong>Eligible outcomes</strong></a></li>
  <li><a href="#eligible-types-of-study-design" id="toc-eligible-types-of-study-design" class="nav-link" data-scroll-target="#eligible-types-of-study-design"><span class="header-section-number">2.3.3</span> <strong>Eligible types of study design</strong></a></li>
  </ul></li>
  <li><a href="#study-validity-assessment" id="toc-study-validity-assessment" class="nav-link" data-scroll-target="#study-validity-assessment"><span class="header-section-number">2.4</span> Study validity assessment</a></li>
  <li><a href="#data-coding-strategy" id="toc-data-coding-strategy" class="nav-link" data-scroll-target="#data-coding-strategy"><span class="header-section-number">2.5</span> Data coding strategy</a></li>
  <li><a href="#data-mapping-method" id="toc-data-mapping-method" class="nav-link" data-scroll-target="#data-mapping-method"><span class="header-section-number">2.6</span> Data mapping method</a></li>
  </ul></li>
  <li><a href="#res" id="toc-res" class="nav-link" data-scroll-target="#res"><span class="header-section-number">3</span> Resultater</a>
  <ul class="collapse">
  <li><a href="#results-of-the-search-for-literature" id="toc-results-of-the-search-for-literature" class="nav-link" data-scroll-target="#results-of-the-search-for-literature"><span class="header-section-number">3.1</span> Results of the search for literature</a>
  <ul class="collapse">
  <li><a href="#sources-and-document-types-of-included-articles" id="toc-sources-and-document-types-of-included-articles" class="nav-link" data-scroll-target="#sources-and-document-types-of-included-articles"><span class="header-section-number">3.1.1</span> Sources and document types of included articles</a></li>
  </ul></li>
  </ul></li>
  <li><a href="#references" id="toc-references" class="nav-link" data-scroll-target="#references"><span class="header-section-number">4</span> Referanser</a></li>
  </ul>
</nav>
</div>
<div id="quarto-margin-sidebar" class="sidebar margin-sidebar">
</div>
<main class="content" id="quarto-document-content">

<header id="title-block-header" class="quarto-title-block default">
<div class="quarto-title">
<h1 class="title">Effekter av arealbruk og arealbruksendringer på biodiversitet, økosystemtjenester og karbonlagrin i Norge</h1>
<p class="subtitle lead">Et systematisk kart og beslutningsstøtteverktøy</p>

  Erlend B. Nilsen
  , Skriv in forfatter her
  , Skriv in forfatter her
  , Skriv in siste forfatter her

<br>
<img src="image/Evju_hyttelandskap.jpg" alt="Hyttelandskap" width="460" height="345">
<br>
<div class="abstract-title">Siteres som:</div>
Brum, O., Robin, K. 2016. En veldig bra titel. NINA Rapport 1234. Norsk institutt for naturforskning.
<br>
<br>
Kvalitetsgranskere: xx
<br>
Ansvarlig signatur: Forskningssjef [fylles ut av forskningssjefen] (sign.)
<br>
<div class="abstract">
<div class="abstract-title">Sammendrag</div>
<p>Tekst inn her, et kort resymé av innholdet. Teksten i sammendraget er søkbar i databaser og på nett, og er viktig for at rapporten skal fanges opp ved søk.<br>
<br>
Seksjoner og tomme rader mellom dem er litt tricky å få til i YAML-avsnittet, men det kan gjøres slik. Tomme rader i forordet kan også lages på samme måte.</p>
</div>

<div class="abstract">
<div class="abstract-title">Abstract</div>
Tekst inn her, et kort resymé av innholdet. Teksten i sammendraget er søkbar i databaser og på nett, og er viktig for at rapporten skal fanges opp ved søk.
</div>



<!-- 
<div class="quarto-title-meta">

    
  
    
  </div>
  
<div>
  <div class="abstract">
    <div class="block-title">Abstract</div>
    Tekst inn her, et kort resymé av innholdet. Teksten i sammendraget er søkbar i databaser og på nett, og er viktig for at rapporten skal fanges opp ved søk.
  </div>
</div>

<div>
  <div class="keywords">
    <div class="block-title">Keywords</div>
    <p>ett, två</p>
  </div>
</div>
 -->

</div></header>


<section id="sec-inl" class="level1" data-number="1">
<h1 data-number="1"><span class="header-section-number">1</span> Innledning</h1>
<p>Endring i arealbruk og landdekke (LULCC) anses å være den dominerende driveren av nylig tap av biodiversitet både globalt og i Norge, og påvirker direkte naturens evne til å tilby naturgoder og -tjenester (Díaz et al., 2019; Malhi et al., 2020). LULCC påvirker også et økosystems evne til å lagre og binde karbon i jord og biologisk materiale, og påvirker dermed direkte et økosystems evne til å bidra til å motvirke og tilpasse seg klimaendringer. Å kvantifisere, forstå og formidle dynamikken i arealendringer og deres effekter på biodiversitet, økosystemtjenester og karbonlagring er derfor en forutsetning for evidensbaserte arealbruksstrategier. Imidlertid mangler det for øyeblikket systematisk evidens om dette temaet fra norske økosystemer. Mye av den offentlige diskursen på nasjonalt nivå domineres av internasjonale globale kunnskapssammendrag, til tross for betydelig usikkerhet rundt nedskalering og overføring av kunnskap fra globale og regionale synteser til lokalt/nasjonalt nivå, på tvers av økosystemer og taksonomiske grupper. Tidligere kunnskapssammendrag basert på data fra norske økosystemer har enten fulgt spesifikke tilnærminger (f.eks. Økosystemvurdering; (Nybø et al., 2017)), i stor grad basert på ekspertvurderinger (Artsdatabanken, 2021), eller vært begrenset i omfang. Mangelen på en omfattende oversikt over forskningsbasert kunnskap fra norske økosystemer fører også til at ulike interessegrupper og sektorer stoler på ulike “fakta,” noe som ofte fører til eskalerende konflikter og dårlige beslutninger. Det er derfor et presserende behov både for en oppsummering av kunnskap og identifisering av reelle kunnskapshull.</p>
<p>Politikk og beslutningstaking knyttet til arealbruk og dens effekter på biodiversitet og klima er for øyeblikket blant de mest konfliktfylte og heftig debatterte politiske spørsmålene i Norge. Konfliktene involverer typisk dilemmaer mellom ulike samfunnsmessige bekymringer og interesser støttet av ulike sektorer og aktørgrupper (Guldbrandsen &amp; Handberg, 2022; Skogen et al., 2021). Kunnskapskontrovers er også ofte en sentral egenskap ved konfliktene, og innebærer uenighet om kunnskapens status og motstridende kunnskapskrav om de miljømessige effektene av ulike alternativer for arealbruk (Aspøy &amp; Stokland, 2022; Rusch et al., 2022). IPBES (2019, 2022a, 2022b) og IPCC (2018) har foreslått styringsmetoder og tiltak, slik som de knyttet til transformasjonsendringer og transformasjonsstyring, for å muliggjøre oppnåelsen av SDG-ene, grensen på 1,5°C og 2050-visjonen for biodiversitet. Slike tilnærminger involverer forbedret integrasjon og samhandling mellom samfunnsmessige mål, styringssektorer og flere kunnskapskilder, og er dermed svært relevante for norsk politikk og beslutningstaking knyttet til arealbruk. Imidlertid hindres utnyttelsen og tilpasningen av internasjonalt anbefalte tilnærminger og verktøy i en norsk kontekst for øyeblikket av mangelen på en omfattende forståelse av nasjonale og lokale dilemmaer og konflikter knyttet til arealbruk, samt de for tiden anvendte verktøyene og tilnærmingene. Det er derfor et presserende behov for en kunnskapssyntese og identifisering av kunnskapshull angående disse aspektene ved arealbruk og dens effekter på biodiversitet og klima.</p>
<p>Systematiske kart (også kjent som Evidenshullkart eller Evidenskart) ble designet for å gi en oversikt over tilgjengelig evidens om et bredt tema (Saran et al., 2020). De søker ikke å svare på smale, veldefinerte spørsmål (slik systematiske oversikter gjør), men heller å gi et middel til å identifisere og katalogisere tilgjengelig evidens om politisk relevante spørsmål (James et al., 2016). Systematiske kart har blitt realisert på en rekke ulike måter, men gir generelt resultatene på en brukervennlig måte, for eksempel ved hjelp av grafer, kart eller søkbare databaser (Miake-Lye et al., 2016). Interaktive plott og kartlegging blir i økende grad brukt for å gi en dynamisk utgang til brukerne (slik som EviAtlas; Haddaway et al., 2019). Det er viktig at systematiske kart ikke fremstilles som et mål i seg selv. Uten ytterligere evidenssyntese må beslutningstakere være forsiktige med å treffe beslutninger basert kun på evidensens vekt alene (dvs. stemmeoptelling, jf. (Hedges &amp; Olkin, 1980)). Systematiske kart kan ikke erstatte rigoriteten til systematiske oversikter, men kan gi beslutningstakere forståelse av evidensgrunnlaget ved å belyse hull eller klynger av evidens. De kan vise hvor evidenssyntese kan finne sted (dvs. det er tilstrekkelig med tilgjengelig evidens for en systematisk oversikt) eller hvor primærforskning er nødvendig (dvs. det er mangel på evidens). Beslutningsmodeller kan supplere resultatene av en systematisk evidenssyntese for å plassere den tilgjengelige evidensen i beslutningskonteksten (Carrick et al., 2019).</p>
<section id="arealbruk-og-arealbruksendringer-i-norge" class="level2" data-number="1.1">
<h2 data-number="1.1" class="anchored" data-anchor-id="arealbruk-og-arealbruksendringer-i-norge"><span class="header-section-number">1.1</span> Arealbruk og arealbruksendringer i Norge</h2>
<p>TROND OG/ELLER ANDERS - KAN DERE SKRIVE HER OM AREALBRUK OG AREALBRUKSENDRINGER I NORGE DEN SISTE TIDEN (LITT USIKKER PÅ TIDSPERSPEKTIV, MEN TROLIG SISTE 100-50 ÅR).</p>
</section>
<section id="involvering-av-brukere-og-samfunnsaktører" class="level2" data-number="1.2">
<h2 data-number="1.2" class="anchored" data-anchor-id="involvering-av-brukere-og-samfunnsaktører"><span class="header-section-number">1.2</span> Involvering av brukere og samfunnsaktører</h2>
<p>The outline for the review was presented at a conference held by the Norwegian Environment Agency and the Norwegian Research Council October 23, 2022. A general stakeholder meeting was arranged by NINA on April 25, 2023. The focus and scope of the review was narrowed and better defined during a specific stakeholder event on #date. Details of this meeting and the modifications in scope are available on request. Stakeholders who attended this event were invited to comment on the draft protocol prior to submission for publication. Stakeholders were not engaged during the conduct of the review.</p>
</section>
<section id="formålet-med-kunnskapssammenstillingen" class="level2" data-number="1.3">
<h2 data-number="1.3" class="anchored" data-anchor-id="formålet-med-kunnskapssammenstillingen"><span class="header-section-number">1.3</span> Formålet med kunnskapssammenstillingen</h2>
<p>Hovedmålet med dette prosjektet er å gi en helhetlig oversikt over tilgjengelig kunnskap knyttet til effekter av arealbruk og arealbruksendringer på norsk natur, med fokus på biologisk mangfold, økosystemtjenester, klimatilpasning, karbonbinding og lagring. Kartet er begrenset i geografisk omfang til Norge, Sverige og Finland (se inklusjonskriterier nedenfor). Rapporten er dessuten ledsaget av et beslutningsstøtteverktøy som en utvidelse av det systematiske kartet for å kontekstualisere tilgjengelig kunnskap. Verktøyet er utformet som en konseptuell modell av kunnskapsfeltet og synliggjøre betydningen av kunnskapshull på ulike områder.</p>
<section id="hovedproblemstilling" class="level3" data-number="1.3.1">
<h3 data-number="1.3.1" class="anchored" data-anchor-id="hovedproblemstilling"><span class="header-section-number">1.3.1</span> Hovedproblemstilling</h3>
<p>Hovedspørsmålet i vårt systematiske kart er «Hvilke forskningsbasert kunnskap finnes knyttet til virkningene av arealbruk og endringer i arealbruk på biologisk mangfold, økosystemtjenester og karbonbinding i Norge, hvilken type konflikter er identifisert mellom ulike former for arealbruk, og hvilke verktøy foreslås for å forbedre styringen”.</p>
</section>
<section id="underproblemstillinger" class="level3" data-number="1.3.2">
<h3 data-number="1.3.2" class="anchored" data-anchor-id="underproblemstillinger"><span class="header-section-number">1.3.2</span> Underproblemstillinger</h3>
<p>Vi vil karakterisere den eksisterende litteraturen langs følgende akser:</p>
<ul>
<li><p>Hvor stor andel av forskningen er basert på empiriske data?</p></li>
<li><p>Hvor stor andel av forskningen er basert på eksperimenter vs observasjonelle studier?</p></li>
<li><p>Hvor stor andel av forskningen er basert på kvalitative metoder vs kvantitative/blandete metoder?</p></li>
<li><p>Hvordan er forskningen fordelt over ulike økosystemer?</p></li>
<li><p>Hvordan er forskningen fordelt over ulike disipliner?</p></li>
<li><p>Hvordan er forskningen fordelt over ulike nivå av biologisk organisering?</p></li>
<li><p>Hva er de mest studerte formene for arealbruk og arealbruksendringer?</p></li>
<li><p>Hvilke regioner/fylker er mest representert i datamaterialet?</p></li>
<li><p>Hvor stor andel av forskningen fokuserer på governance, konfliker og verktøy?</p></li>
<li><p>What are the dominant types of land use that are investigated?</p></li>
<li><p>Hva er de dominante analytiske tilnærmingene for samfunnsvitenskapelige studier?</p></li>
<li><p>Hvilke aktører er hyppigst representert i forskningen?</p></li>
<li><p>Hvilke sektorer og samfunnsmessige områder er hyppigst studert?</p></li>
<li><p>Which level of societal scale do the studies represent?</p></li>
<li><p>Which land use conflicts are most researched?</p></li>
<li><p>Which tools are proposed and investigated?</p></li>
</ul>
</section>
</section>
</section>
<section id="sec-met" class="level1" data-number="2">
<h1 data-number="2"><span class="header-section-number">2</span> Metoder</h1>
<p>Før prosjektet ble gjennomført ble det uviklet en detaljert protokoll som beskriver gjennomføringen. Denne protokollen inkluderte en detlajert beskrivelse av:</p>
<ul>
<li><p>Søkestrenger, søkeord og språk</p></li>
<li><p>Eventuelle supplerende søk som f.eks. «<em>citation chasing</em>»</p></li>
<li><p>Hvilke databaser vi vil søke i, og eventuelle nettsteder for søk etter grå litteratur som ikke er tilgjengelig i databasene</p></li>
<li><p>Sentrale artikler (<em>benchmark-artikler</em>) som søket forventes å plukke opp</p></li>
<li><p>Kriterier for screening av artikler (inkludering/ekskluderings-kriterier)</p></li>
<li><p>Prosedyrer for sjekk av konsistens mellom review-personellet</p></li>
<li><p>Regler for datakoding</p></li>
</ul>
<p>Versjon 1.0 av protokollen ble uviklet på et tidlig prosjektstadie, og sirkulert til en utvidet prosjektgruppe og til utvalgte samfunnsaktører. Basert på tilbakemeldinger på denne versjonen ble en ny versjon av protokollen utarbeidet og publisert. Videre justeringer av protokollen har blitt gjennomført på screening- og koding-stadiet av prosjektet. Alle versjoner er publisert åpent på Open Science Framework, og alle versjoner er versjonert og datert. En oversikt over protokollene kan finnes her https://osf.io/mwapc/. Den enelige versjonen av protokollen kan leses her (ref).</p>
<section id="avvik-fra-protokollen" class="level2" data-number="2.1">
<h2 data-number="2.1" class="anchored" data-anchor-id="avvik-fra-protokollen"><span class="header-section-number">2.1</span> Avvik fra protokollen</h2>
<p>Erlend skriver her…</p>
</section>
<section id="søk-etter-litteratur" class="level2" data-number="2.2">
<h2 data-number="2.2" class="anchored" data-anchor-id="søk-etter-litteratur"><span class="header-section-number">2.2</span> Søk etter litteratur</h2>
<section id="søk-i-online-databaser" class="level3" data-number="2.2.1">
<h3 data-number="2.2.1" class="anchored" data-anchor-id="søk-i-online-databaser"><span class="header-section-number">2.2.1</span> Søk i online databaser</h3>
<p>Systematiske litteratursøk for akademisk (forskningsbasert) litteratur ble gjennomført i Scopus og i følgende Web of Science Core Collection databaser:</p>
<ul>
<li><p>Science Citation Index Expanded (SCI-EXPANDED): 1987–dd.</p></li>
<li><p>Social Sciences Citation Index (SSCI): 1987–dd.</p></li>
<li><p>Arts and Humanities Citation Index (AHCI): 1987–dd.</p></li>
<li><p>Emerging Sources Citation Index (ESCI): 2015–dd.</p></li>
</ul>
<p>Det ble gjennomført en rekke preliminære søk i Web of Science, og disse ble benyttet til å fintune søkestrengen (ref protokollen).</p>
</section>
<section id="søketermer-og-søkestreng" class="level3" data-number="2.2.2">
<h3 data-number="2.2.2" class="anchored" data-anchor-id="søketermer-og-søkestreng"><span class="header-section-number">2.2.2</span> Søketermer og søkestreng</h3>
<p>I vår søkestrategi benyttet vi oss av PICO-rammeverket (James et al., 2016) for å strukturere søket, og sørge for at det var dekkende for vårt primære forskningsspørsmål.</p>
<p>Følgende søkestreng ble benyttet i WoS (tilsvarende streng ble benyttet i Scopus, men her ble søket justert for å passe systemets interface):</p>
<!--# Add link to search strings -->
<p><em>TS=(“land use” OR “land cover” OR “space use” OR LULCC OR (planning AND (spati* OR region* OR area* OR conservation OR land* OR urban)) OR (conversion AND (land* OR habitat* OR area* OR ecosystem* OR natur)) OR (change NEAR/3 (land* OR area)) OR “national park” OR landscape* OR habitat* OR Husbandry OR “land shar” OR “land spar” OR (Outdoor NEAR/3 (life OR livin* OR recreat)) OR (restoration AND (nature OR ecosystem)) OR forestry OR (reindeer NEAR/3 (herd* OR husbandr)) OR (livestock NEAR/3 graz) OR “holiday home” OR “secondary home”OR (recreation* NEAR/3 (home* OR cottage* OR cabin* OR propert)) OR tourism OR “wind power” OR “Land manag” OR “Nature conservation” OR ((governance OR management) AND (spati* OR region* OR area* OR conservation OR land* OR urban)) OR aquaculture OR “fish farm” OR hydropower OR “green energy” OR “energy development” OR herding OR agriculture OR transportation OR road OR “oil and gas” OR petroleum OR mining OR windpower OR traffic OR road* OR railway* OR “hydroelectric power” OR “solar power” OR “solar electricity” OR “power plant” OR LULC OR LULUCF OR AFOLU OR FOLU)</em></p>
<p><em>AND</em></p>
<p><em>TS=(sustainab* OR biodiversity OR “Ecosystem service” OR (carbon NEAR/3 (stor OR sequest)) OR (ecosystem NEAR/3 (impact* OR effect* OR provision* OR regulat* OR support* OR cultur)) OR ((loss OR shrink OR bisection* OR perforation OR fragmentation) AND (habitat OR land)) OR (climate NEAR/3 adapt) OR ecodiversity OR “ecosystem type” OR “ecological process” OR anthropogenic OR conflict OR (diversity NEAR/3 (ecological OR speci* OR population*)) OR red-list OR “water purification” OR “soil retention” OR spiritual OR cultural OR aesthetics OR “climate mitigation”)</em></p>
<p>We screened all systematic reviews and systematic maps from the international literature, the two categories were combined with TS=(“Systematic review<em>” OR ”systematic map</em>” OR “rapid review*”). For the primary literature, the two categories were combined with TS=(Norway OR Norwegian OR Sweden OR Swedish OR Finland OR Finnish), and all results screened.</p>
</section>
<section id="test-av-søkets-omfang-og-dekning" class="level3" data-number="2.2.3">
<h3 data-number="2.2.3" class="anchored" data-anchor-id="test-av-søkets-omfang-og-dekning"><span class="header-section-number">2.2.3</span> Test av søkets omfang og dekning</h3>
<p>For å sørge for at søket ga en god dekning av den aktuelle litteraturen valgte vi ut 15 benchmark-artikler, og undersøkte hvor godt disse ble fanget opp av søket. Artiklene ble valgt ut gjennom en diskusjon i prosjektgruppa, med det formål å dekke både bredde og dybde i søket. I det enedelig søket ble totalt 13 av de 15 artiklene fanget opp.</p>
<div class="cell" data-layout-align="left">
<div class="cell-output-display">
<div class="quarto-figure quarto-figure-left">
<figure class="figure">
<p><img src="quarto_ninareport_files/figure-html/unnamed-chunk-2-1.svg" class="img-fluid figure-img"></p>
<figcaption>Overlap between the different sources of literature and the benchmark papers</figcaption>
</figure>
</div>
</div>
</div>
<p>De 15 benchmark-artiklene var som følger:</p>
<ul>
<li><p>Aune, S., Bryn, A. &amp; Hovstad, K.A. 2018. Loss of semi-natural grassland in a boreal landscape: impacts of agricultural intensification and abandonment. Journal of Land Use Science 13(4): 375-390. <a href="https://doi.org/10.1080/1747423x.2018.1539779" class="uri">https://doi.org/10.1080/1747423x.2018.1539779</a></p></li>
<li><p>Bouyer, Y., Martin, G.S., Poncin, P., Beudels-Jamar, R.C., Odden, J. &amp; Linnell, J.D.C. 2015. Eurasian lynx habitat selection in human-modified landscape in Norway: Effects of different human habitat modifications and behavioral states. Biological Conservation 191: 291-299. <a href="https://doi.org/10.1016/j.biocon.2015.07.007" class="uri">https://doi.org/10.1016/j.biocon.2015.07.007</a></p></li>
<li><p>Dorber, M., May, R. &amp; Verones, F. 2018. Modeling Net Land Occupation of Hydropower Reservoirs in Norway for Use in Life Cycle Assessment. Environmental Science &amp; Technology 52(4): 2375-2384. <a href="https://doi.org/10.1021/acs.est.7b05125" class="uri">https://doi.org/10.1021/acs.est.7b05125</a></p></li>
<li><p>Foldvik, A., Einum, S., Finstad, A.G. &amp; Ugedal, O. 2017. Linking watershed and microhabitat characteristics: effects on production of Atlantic salmonids (Salmo salar and Salmo trutta). Ecology of Freshwater Fish 26(2): 260-270. <a href="https://doi.org/10.1111/eff.12272" class="uri">https://doi.org/10.1111/eff.12272</a></p></li>
<li><p>Gundersen, V., Vistad, O.I., Panzacchi, M., Strand, O. &amp; van Moorter, B. 2019. Large-scale segregation of tourists and wild reindeer in three Norwegian national parks: Management implications. Tourism Management 75: 22-33. <a href="https://doi.org/10.1016/j.tourman.2019.04.017" class="uri">https://doi.org/10.1016/j.tourman.2019.04.017</a></p></li>
<li><p>Hamre, L.N., Domaas, S.T., Austad, I. &amp; Rydgren, K. 2007. Land-cover and structural changes in a western Norwegian cultural landscape since 1865, based on an old cadastral map and a field survey. Landscape Ecology 22(10): 1563-1574. <a href="https://doi.org/10.1007/s10980-007-9154-y" class="uri">https://doi.org/10.1007/s10980-007-9154-y</a></p></li>
<li><p>Hamre, L.N., Rydgren, K., Incerti, C., Hjorth-Johansen, I. &amp; Simonsen, K.S. 2021. Paradise lost - transformation of the gully landscape in South-East Norway. Landscape Research 46(3): 377-389. <a href="https://doi.org/10.1080/01426397.2020.1847263" class="uri">https://doi.org/10.1080/01426397.2020.1847263</a></p></li>
<li><p>Jarnemo, A., Minderman, J., Bunnefeld, N., Zidar, J. &amp; Månsson, J. 2014. Managing landscapes for multiple objectives: alternative forage can reduce the conflict between deer and forestry. Ecosphere 5(8): 14. <a href="https://doi.org/10.1890/es14-00106.1" class="uri">https://doi.org/10.1890/es14-00106.1</a></p></li>
<li><p>Karlsson, J., Byström, P., Ask, J., Ask, P., Persson, L. &amp; Jansson, M. 2009. Light limitation of nutrient-poor lake ecosystems. Nature 460(7254): 506-U80. https://doi.org/10.1038/nature08179</p></li>
<li><p>Korsnes, M., Loewen, B., Dale, R.F., Steen, M. &amp; Skjolsvold, T.M. 2023. Paradoxes of Norway’s energy transition: controversies and justice. Climate Policy: 23(9): 1132-1150. <a href="https://doi.org/10.1080/14693062.2023.2169238" class="uri">https://doi.org/10.1080/14693062.2023.2169238</a></p></li>
<li><p>Pedersen, C. &amp; Krogli, S.O. 2017. The effect of land type diversity and spatial heterogeneity on farmland birds in Norway. Ecological Indicators 75: 155-163. <a href="https://doi.org/10.1016/j.ecolind.2016.12.030" class="uri">https://doi.org/10.1016/j.ecolind.2016.12.030</a></p></li>
<li><p>Rolstad, J., Blanck, Y.L. &amp; Storaunet, K.O. 2017. Fire history in a western Fennoscandian boreal forest as influenced by human land use and climate. Ecological Monographs 87(2): 219-245. <a href="https://doi.org/10.1002/ecm.1244" class="uri">https://doi.org/10.1002/ecm.1244</a></p></li>
<li><p>Rusch, G.M., Bartlett, J., Kyrkjeeide, M.O., Lein, U., Norden, J., Sandvik, H. &amp; Stokland, H. 2022. A joint climate and nature cure: A transformative change perspective. Ambio 51(6): 1459-1473. <a href="https://doi.org/10.1007/s13280-021-01679-8" class="uri">https://doi.org/10.1007/s13280-021-01679-8</a></p></li>
<li><p>Skogen, K., Mauz, I. &amp; Krange, O. 2008. Cry wolf! Narratives of wolf recovery in France and Norway. Rural Sociology 73(1): 105-133. <a href="https://doi.org/10.1526/003601108783575916" class="uri">https://doi.org/10.1526/003601108783575916</a></p></li>
<li><p>Tombre, I.M., Eythórsson, E. &amp; Madsen, J. 2013. Towards a Solution to the Goose-Agriculture Conflict in North Norway, 1988-2012: The Interplay between Policy, Stakeholder Influence and Goose Population Dynamics. Plos One 8(8): e71912. <a href="https://doi.org/10.1371/journal.pone.0071912" class="uri">https://doi.org/10.1371/journal.pone.0071912</a></p></li>
</ul>
</section>
<section id="ytterligere-søk-etter-litteratur" class="level3" data-number="2.2.4">
<h3 data-number="2.2.4" class="anchored" data-anchor-id="ytterligere-søk-etter-litteratur"><span class="header-section-number">2.2.4</span> Ytterligere søk etter litteratur</h3>
<p>Artikler som er sitert av eller siterer (engelsk: forward and backward citation chasing) de 15 benchmark-artiklene ble søkt ved hjelp av verktøyet citationchaser i R (Haddaway et al.&nbsp;2022).</p>
</section>
<section id="section" class="level3" data-number="2.2.5">
<h3 data-number="2.2.5" class="anchored" data-anchor-id="section"><span class="header-section-number">2.2.5</span> </h3>
</section>
<section id="sammenstilling-og-håndtering-av-søkeresultater" class="level3" data-number="2.2.6">
<h3 data-number="2.2.6" class="anchored" data-anchor-id="sammenstilling-og-håndtering-av-søkeresultater"><span class="header-section-number">2.2.6</span> Sammenstilling og håndtering av søkeresultater</h3>
<p>Søkeresultater, inkludert listen over benchmarks og “citation chasing” resultater, ble lastet ned som .RIS-filer. Studier ble de-duplisert basert på DOI og tittelmatcher ved å bruke R-pakken ‘ASySD’ (Hair et al.&nbsp;2021). Vi beholdt den nyeste versjonen av alle versjonskontrollerte artikler (for eksempel ble publiserte versjoner av forhåndstrykk beholdt). De-dupliserte artikler ble deretter lastet opp til RayyanAI for å lette screening. Artikler som besto sammendragsscreeningsstadiet ble deretter eksportert til en delt Zotero-database, og pdf-versjoner ble søkt etter ved hjelp av Zoteros pdf-søkeverktøy. Eventuelle artikler uten pdf-er ble søkt manuelt på ResearchGate eller på tidsskriftsnettsteder. Der hvor pdf-er ikke var tilgjengelige, ble de bedt om fra forfatterne. Beslutninger om eksklusjonsårsaker på fulltekststadiet ble registrert i Notes-verktøyet i Zotero. Koding fant sted ved bruk av et “google-form” som automatisk fylte ut et “googlesheet” som dannet databasen over inkluderte studier.</p>
</section>
<section id="screening-av-artikler" class="level3" data-number="2.2.7">
<h3 data-number="2.2.7" class="anchored" data-anchor-id="screening-av-artikler"><span class="header-section-number">2.2.7</span> Screening av artikler</h3>
<p>Vi brukte forhåndsdefinerte inklusjons-/eksklusjonskriterier for å screene kvalifiserte studier. Inkluderte studier ble de-duplisert basert på DOI og tittelmatcher ved å bruke R-pakken ‘ASySD’ (Hair et al.&nbsp;2021). Vi beholdt den nyeste versjonen av alle versjonskontrollerte artikler (for eksempel ble publiserte versjoner av forhåndstrykk beholdt).</p>
<p>Etter de-duplisering ble tittel og abstrakt screening utført ved å bruke kvalifikasjonskriteriene, og alle studier klassifisert som usikre ble vurdert på fulltekststadiet. Screeningen ble gjort ved hjelp av Rayyan, med dobbel screening av en primær og flere sekundære anmeldere. Etter 50 inkluderings-/ekskluderingsbeslutninger brukte vi Rayyan-AI 5-stjerners rangering for å rangere sammendragene for vurdering. Denne algoritmen vurderer sammendrag og titler ved hjelp av naturlig språkbehandling for å identifisere poster som har et høyt potensial for inkludering (5 stjerner) eller de med et lavere potensial (1 stjerne).</p>
<p>Ukentlig overvåking ble utført for gruppeuenighetsrater, og kvalifikasjonskriteriene ble revurdert og justert når frekvensen oversteg 15 %. Motstridende beslutninger ble avstemt gjennom diskusjoner med hele gjennomgangsgruppen. Studier merket som usikre på hvert trinn ble vurdert på neste nivå, med de som var merket som usikre gjennomgått av hele teamet.</p>
</section>
</section>
<section id="inkluderings--og-ekskluderingskriterier" class="level2" data-number="2.3">
<h2 data-number="2.3" class="anchored" data-anchor-id="inkluderings--og-ekskluderingskriterier"><span class="header-section-number">2.3</span> Inkluderings- og ekskluderingskriterier</h2>
<p>We reviewed the collated studies obtained from the searches using the criteria set below. Only studies conducted in Norway, Sweden and Finland or systematic reviews (also referred to as meta-analyses) with global, European or Fennoscandian coverage were included in the review. Only records where the full-text is written in English, Norwegian, Swedish, or Danish were considered eligible.</p>
<p>Studies will be eligible if they assess land use or land-use-change effects on the biodiversity, ecosystem services/functions or carbon sequestration and storage in Feno-Scandinavia. Only studies that focus on terrestrial, aquatic or coastal areas are include (i.e.&nbsp;studies focusing on marine systems are excluded).</p>
<p>Studies will also be eligible if they assess conflicts, tools or governance relating to land use and cover change its effects on biodiversity, ecosystem services and/or carbon sequestration and storage by ecosystems in Fenno-Scandinavia. The relation should be explicit in study for the record to be included.</p>
<p>Studies of all scales (national, regional, and local) will be considered eligible.</p>
<section id="eligible-interventions" class="level3" data-number="2.3.1">
<h3 data-number="2.3.1" class="anchored" data-anchor-id="eligible-interventions"><span class="header-section-number">2.3.1</span> <strong>Eligible interventions</strong></h3>
<p>Land use and/or land cover change through one or multiple drivers (see Appendix) which are anthropogenic in origin and result in one or more of the core mechanisms (change in habitat – amount; habitat composition; habitat structure; habitat – function; indirect, e.g.&nbsp;changed human use in recreation etc).</p>
</section>
<section id="eligible-outcomes" class="level3" data-number="2.3.2">
<h3 data-number="2.3.2" class="anchored" data-anchor-id="eligible-outcomes"><span class="header-section-number">2.3.2</span> <strong>Eligible outcomes</strong></h3>
<p>Eligible outcomes will include function, structure, diversity, abundance, behaviour, composition, or richness in any level of biological organisation (genetic, species, community, ecosystem, landscape – multiple ecosystems), as well as studies focusing on the amount of, diversity or category of ecosystem services (provisioning, regulating, supporting or cultural service and, carbon storage and sequestration).</p>
<p>In addition, studies within the social sciences will be included if they explicitly address conflicts, tools and governance pertaining to effects land use and land cover change on biodiversity, ecosystem services and/or carbon sequestration and storage.</p>
</section>
<section id="eligible-types-of-study-design" class="level3" data-number="2.3.3">
<h3 data-number="2.3.3" class="anchored" data-anchor-id="eligible-types-of-study-design"><span class="header-section-number">2.3.3</span> <strong>Eligible types of study design</strong></h3>
<p>All study designs will be considered eligible, including both quantitative and qualitative studies.</p>
</section>
</section>
<section id="study-validity-assessment" class="level2" data-number="2.4">
<h2 data-number="2.4" class="anchored" data-anchor-id="study-validity-assessment"><span class="header-section-number">2.4</span> Study validity assessment</h2>
<p>Matt write here</p>
</section>
<section id="data-coding-strategy" class="level2" data-number="2.5">
<h2 data-number="2.5" class="anchored" data-anchor-id="data-coding-strategy"><span class="header-section-number">2.5</span> Data coding strategy</h2>
<p>For all papers that met the eligibility criteria and were included in the review, we extracted key properties and characteristics for later data analysis. A sample of 15 papers were coded by all reviewers, to quantify disagreement in coding. Criterion for coding is provided in Appendix 3.&nbsp; ‘Meta data’ included basic properties for each study, such as author names, journal/report, series, study length and years. The remaining categories included information about open science, geographical, environmental and spatial context, research type and context, taxonomic context, type of land use and land use change, outcomes and impacted measures, governance impacts and tools.</p>
</section>
<section id="data-mapping-method" class="level2" data-number="2.6">
<h2 data-number="2.6" class="anchored" data-anchor-id="data-mapping-method"><span class="header-section-number">2.6</span> Data mapping method</h2>
<p>Matt write here</p>
<div style="page-break-after: always;"></div>
</section>
</section>
<section id="res" class="level1" data-number="3">
<h1 data-number="3"><span class="header-section-number">3</span> Resultater</h1>
<section id="results-of-the-search-for-literature" class="level2" data-number="3.1">
<h2 data-number="3.1" class="anchored" data-anchor-id="results-of-the-search-for-literature"><span class="header-section-number">3.1</span> Results of the search for literature</h2>
<div class="cell" data-layout-align="left">
<div class="cell-output-display">
<div class="grViz html-widget html-fill-item-overflow-hidden html-fill-item" id="htmlwidget-49624eca8452ca29eee4" style="width:100%;height:464px;"></div>
<script type="application/json" data-for="htmlwidget-49624eca8452ca29eee4">{"x":{"diagram":"digraph prisma {\n    node [shape=\"box\", fontsize = 10];\n    graph [splines=ortho, nodesep=1, dpi = 72]\n    a -> nodups;\n    b -> nodups;\n    a [label=\"Records identified through\ndatabase searching\n(n = 36418)\"];\n    b [label=\"Additional records identified\nthrough other sources\n(n = 1965)\"]\n    nodups -> incex;\n    nodups [label=\"Records after duplicates removed\n(n = 20265)\"];\n    incex -> {ex; ft}\n    incex [label=\"Records screened\n(n = 14808)\"];\n    ex [label=\"Records excluded\n(n = 12144)\"];\n    {rank=same; incex ex}\n    ft -> {qual; ftex};\n    ft [label=\"Full-text articles assessed\nfor eligibility\n(n = 2398)\"];\n    {rank=same; ft ftex}\n    ftex [label=\"Full-text articles excluded,\nwith reasons\n(n = 0)\"];\n    qual -> quant\n    qual [label=\"Studies included in qualitative synthesis\n(n = 0)\"];\n    quant [label=\"Studies included in\nquantitative synthesis\n(meta-analysis)\n(n = 0)\"];\n  }","config":{"engine":"dot","options":null}},"evals":[],"jsHooks":[]}</script>
</div>
</div>
<section id="sources-and-document-types-of-included-articles" class="level3" data-number="3.1.1">
<h3 data-number="3.1.1" class="anchored" data-anchor-id="sources-and-document-types-of-included-articles"><span class="header-section-number">3.1.1</span> Sources and document types of included articles</h3>
<p>R-kod kan legges til på vanlig vis. Fargemønstret kan endres gjennom <code>highlight: xxx</code> Yaml-avsnittet i starten på dokumentet.</p>
<div class="cell" data-layout-align="left">
<div class="sourceCode cell-code" id="cb1"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb1-1"><a href="#cb1-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Slik vises kode-kommentarer</span></span>
<span id="cb1-2"><a href="#cb1-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-3"><a href="#cb1-3" aria-hidden="true" tabindex="-1"></a>x <span class="ot">&lt;-</span> <span class="dv">1</span><span class="sc">:</span><span class="dv">10</span> <span class="sc">*</span> <span class="fl">0.5</span> <span class="sc">+</span> <span class="fu">rnorm</span>(<span class="dv">10</span>, <span class="at">mean =</span> <span class="dv">1</span>, <span class="at">sd =</span> <span class="dv">2</span>)</span>
<span id="cb1-4"><a href="#cb1-4" aria-hidden="true" tabindex="-1"></a>y <span class="ot">&lt;-</span> <span class="dv">1</span><span class="sc">:</span><span class="dv">10</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>Quarto er så kalt “kodespråk-agnostisk” og andre programmeringspråk kan brukes. For eksempel Bash:</p>
<div class="cell" data-layout-align="left">
<div class="sourceCode cell-code" id="cb2"><pre class="sourceCode bash code-with-copy"><code class="sourceCode bash"><span id="cb2-1"><a href="#cb2-1" aria-hidden="true" tabindex="-1"></a><span class="cf">for</span> <span class="kw">((</span> <span class="va">n</span><span class="op">=</span><span class="dv">1</span><span class="kw">;</span> <span class="va">n</span><span class="op">&lt;=</span><span class="dv">5</span><span class="kw">;</span> <span class="va">n</span><span class="op">++</span> <span class="kw">))</span></span>
<span id="cb2-2"><a href="#cb2-2" aria-hidden="true" tabindex="-1"></a><span class="cf">do</span></span>
<span id="cb2-3"><a href="#cb2-3" aria-hidden="true" tabindex="-1"></a><span class="bu">echo</span> <span class="st">"Rad </span><span class="va">$n</span><span class="st">"</span></span>
<span id="cb2-4"><a href="#cb2-4" aria-hidden="true" tabindex="-1"></a><span class="cf">done</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>Rad 1
Rad 2
Rad 3
Rad 4
Rad 5</code></pre>
</div>
</div>
<p>Eller Python, som dette skript for å finne primtal:</p>
<div class="cell" data-layout-align="left">
<div class="sourceCode cell-code" id="cb4"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb4-1"><a href="#cb4-1" aria-hidden="true" tabindex="-1"></a>lower <span class="op">=</span> <span class="dv">1</span></span>
<span id="cb4-2"><a href="#cb4-2" aria-hidden="true" tabindex="-1"></a>upper <span class="op">=</span> <span class="dv">20</span></span>
<span id="cb4-3"><a href="#cb4-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb4-4"><a href="#cb4-4" aria-hidden="true" tabindex="-1"></a><span class="cf">for</span> num <span class="kw">in</span> <span class="bu">range</span>(lower, upper <span class="op">+</span> <span class="dv">1</span>):</span>
<span id="cb4-5"><a href="#cb4-5" aria-hidden="true" tabindex="-1"></a>   <span class="cf">if</span> num <span class="op">&gt;</span> <span class="dv">1</span>:</span>
<span id="cb4-6"><a href="#cb4-6" aria-hidden="true" tabindex="-1"></a>       <span class="cf">for</span> i <span class="kw">in</span> <span class="bu">range</span>(<span class="dv">2</span>, num):</span>
<span id="cb4-7"><a href="#cb4-7" aria-hidden="true" tabindex="-1"></a>           <span class="cf">if</span> (num <span class="op">%</span> i) <span class="op">==</span> <span class="dv">0</span>:</span>
<span id="cb4-8"><a href="#cb4-8" aria-hidden="true" tabindex="-1"></a>               <span class="cf">break</span></span>
<span id="cb4-9"><a href="#cb4-9" aria-hidden="true" tabindex="-1"></a>       <span class="cf">else</span>:</span>
<span id="cb4-10"><a href="#cb4-10" aria-hidden="true" tabindex="-1"></a>           <span class="bu">print</span>(num)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>2
3
5
7
11
13
17
19</code></pre>
</div>
</div>
<p>Tabeller fra R kan lages gjennom pakken <code>xtable</code>, <code>kable</code> eller <code>DT::datatable</code>, avhengig output-format. Her er et eksempel på en tabell med modellestimat fra en enkel modell. Vi quarto-variabler for å skifte mellom tabellformat, avhengig hvilken output-format vi renderer. Dette trengs ikke hvis man kun skal lage et format. Man kan også referere til en tabell, for eksempel referer jeg nå til <a href="#tbl-table1" class="quarto-xref">Tabell&nbsp;1</a>.</p>
<div id="tbl-table1" class="cell quarto-float anchored" data-layout-align="left">
<figure class="quarto-float quarto-float-tbl figure">
<figcaption class="quarto-float-caption-top quarto-float-caption quarto-float-tbl" id="tbl-table1-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
Tabell&nbsp;1: Eksempeltabell
</figcaption>
<div aria-describedby="tbl-table1-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
<div class="sourceCode cell-code" id="cb6"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb6-1"><a href="#cb6-1" aria-hidden="true" tabindex="-1"></a>mod1 <span class="ot">&lt;-</span> <span class="fu">glm</span>(y <span class="sc">~</span> x)</span>
<span id="cb6-2"><a href="#cb6-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb6-3"><a href="#cb6-3" aria-hidden="true" tabindex="-1"></a>to_table <span class="ot">&lt;-</span> <span class="fu">round</span>(<span class="fu">summary</span>(mod1)<span class="sc">$</span>coefficients, <span class="dv">3</span>)</span>
<span id="cb6-4"><a href="#cb6-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb6-5"><a href="#cb6-5" aria-hidden="true" tabindex="-1"></a><span class="cf">if</span> (<span class="fu">names</span>(rmarkdown<span class="sc">::</span>metadata<span class="sc">$</span>format) <span class="sc">==</span> <span class="st">"ninareport-pdf"</span>) {</span>
<span id="cb6-6"><a href="#cb6-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb6-7"><a href="#cb6-7" aria-hidden="true" tabindex="-1"></a>    <span class="fu">xtable</span>(to_table, <span class="at">caption =</span> <span class="st">"Tabell laget med xtable."</span>)</span>
<span id="cb6-8"><a href="#cb6-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb6-9"><a href="#cb6-9" aria-hidden="true" tabindex="-1"></a>} <span class="cf">else</span> <span class="cf">if</span> (<span class="fu">names</span>(rmarkdown<span class="sc">::</span>metadata<span class="sc">$</span>format) <span class="sc">==</span> <span class="st">"ninareport-html"</span>) {</span>
<span id="cb6-10"><a href="#cb6-10" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb6-11"><a href="#cb6-11" aria-hidden="true" tabindex="-1"></a>    DT<span class="sc">::</span><span class="fu">datatable</span>(to_table, <span class="at">caption =</span> <span class="st">"Tabell laget med xtable."</span>,</span>
<span id="cb6-12"><a href="#cb6-12" aria-hidden="true" tabindex="-1"></a>        <span class="at">style =</span> <span class="st">"bootstrap"</span>, <span class="at">options =</span> <span class="fu">list</span>(<span class="at">pageLength =</span> <span class="dv">10</span>,</span>
<span id="cb6-13"><a href="#cb6-13" aria-hidden="true" tabindex="-1"></a>            <span class="at">autoWidth =</span> <span class="cn">TRUE</span>, <span class="at">columnDefs =</span> <span class="fu">list</span>(<span class="fu">list</span>(<span class="at">width =</span> <span class="st">"100px"</span>,</span>
<span id="cb6-14"><a href="#cb6-14" aria-hidden="true" tabindex="-1"></a>                <span class="at">targets =</span> <span class="dv">1</span>))))</span>
<span id="cb6-15"><a href="#cb6-15" aria-hidden="true" tabindex="-1"></a>} <span class="cf">else</span> {</span>
<span id="cb6-16"><a href="#cb6-16" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb6-17"><a href="#cb6-17" aria-hidden="true" tabindex="-1"></a>    knitr<span class="sc">::</span><span class="fu">kable</span>(to_table, <span class="at">caption =</span> <span class="st">"Tabell laget med xtable."</span>)</span>
<span id="cb6-18"><a href="#cb6-18" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb6-19"><a href="#cb6-19" aria-hidden="true" tabindex="-1"></a>}</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="datatables html-widget html-fill-item-overflow-hidden html-fill-item" id="htmlwidget-11c3695ef1d74d7c6449" style="width:100%;height:auto;"></div>
<script type="application/json" data-for="htmlwidget-11c3695ef1d74d7c6449">{"x":{"style":"bootstrap","filter":"none","vertical":false,"caption":"<caption>Tabell laget med xtable.<\/caption>","data":[["(Intercept)","x"],[0.154,1.316],[1.747,0.398],[0.08799999999999999,3.305],[0.9320000000000001,0.011]],"container":"<table class=\"table table-striped table-hover row-border order-column display\">\n  <thead>\n    <tr>\n      <th> <\/th>\n      <th>Estimate<\/th>\n      <th>Std. Error<\/th>\n      <th>t value<\/th>\n      <th>Pr(&gt;|t|)<\/th>\n    <\/tr>\n  <\/thead>\n<\/table>","options":{"pageLength":10,"autoWidth":true,"columnDefs":[{"width":"100px","targets":1},{"className":"dt-right","targets":[1,2,3,4]},{"orderable":false,"targets":0}],"order":[],"orderClasses":false},"selection":{"mode":"multiple","selected":null,"target":"row","selectable":null}},"evals":[],"jsHooks":[]}</script>
</div>
</figure>
</div>
<p>Figurer fungerer på vanlig vis. Figurtekst og “etikett” som man kan referere til skrives som quarto-kommentarer i kod-blokken. <a href="#fig-barplot" class="quarto-xref">Figur&nbsp;1</a> viser et eksempel på bruk av NINAs logofarger via funksjonen <code>NinaR::NinaPalette</code>.</p>
<div class="cell" data-layout-align="left">
<div class="sourceCode cell-code" id="cb7"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb7-1"><a href="#cb7-1" aria-hidden="true" tabindex="-1"></a>plot.mat <span class="ot">&lt;-</span> <span class="fu">matrix</span>(<span class="fu">rnorm</span>(<span class="dv">25</span>, <span class="dv">40</span>, <span class="at">sd =</span> <span class="dv">10</span>), <span class="at">ncol =</span> <span class="dv">5</span>,</span>
<span id="cb7-2"><a href="#cb7-2" aria-hidden="true" tabindex="-1"></a>    <span class="at">dimnames =</span> <span class="fu">list</span>(<span class="fu">c</span>(<span class="st">"Sportsfisker"</span>, <span class="st">"Elveeier"</span>, <span class="st">"Oppleid"</span>,</span>
<span id="cb7-3"><a href="#cb7-3" aria-hidden="true" tabindex="-1"></a>        <span class="st">"Fisket"</span>, <span class="st">"Poseidon"</span>), <span class="fu">c</span>(<span class="st">"Lakselus"</span>, <span class="st">"Utsetting"</span>,</span>
<span id="cb7-4"><a href="#cb7-4" aria-hidden="true" tabindex="-1"></a>        <span class="st">" Strengere restriksjoner"</span>, <span class="st">"Fysiske tiltak"</span>,</span>
<span id="cb7-5"><a href="#cb7-5" aria-hidden="true" tabindex="-1"></a>        <span class="st">"Flaks"</span>)))</span>
<span id="cb7-6"><a href="#cb7-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb7-7"><a href="#cb7-7" aria-hidden="true" tabindex="-1"></a>plot.mat <span class="ot">&lt;-</span> tibble<span class="sc">::</span><span class="fu">tibble</span>(<span class="at">Verdi =</span> <span class="fu">rnorm</span>(<span class="at">n =</span> <span class="dv">25</span>, <span class="at">mean =</span> <span class="dv">40</span>,</span>
<span id="cb7-8"><a href="#cb7-8" aria-hidden="true" tabindex="-1"></a>    <span class="at">sd =</span> <span class="dv">10</span>), Prøvetyper <span class="ot">=</span> <span class="fu">rep</span>(<span class="fu">c</span>(<span class="st">"Type_1"</span>, <span class="st">"Type_2"</span>,</span>
<span id="cb7-9"><a href="#cb7-9" aria-hidden="true" tabindex="-1"></a>    <span class="st">"Type_3"</span>, <span class="st">"Type_4"</span>, <span class="st">"Type_5"</span>), <span class="at">each =</span> <span class="dv">5</span>), <span class="at">Kategori =</span> <span class="fu">rep</span>(<span class="fu">c</span>(<span class="st">"Lengde"</span>,</span>
<span id="cb7-10"><a href="#cb7-10" aria-hidden="true" tabindex="-1"></a>    <span class="st">"Høyde"</span>, <span class="st">"Dybde"</span>, <span class="st">"Vekt"</span>, <span class="st">"Kvalitet"</span>), <span class="at">times =</span> <span class="dv">5</span>))</span>
<span id="cb7-11"><a href="#cb7-11" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb7-12"><a href="#cb7-12" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(plot.mat) <span class="sc">+</span> <span class="fu">geom_bar</span>(<span class="fu">aes</span>(<span class="at">x =</span> Verdi, <span class="at">y =</span> Prøvetyper,</span>
<span id="cb7-13"><a href="#cb7-13" aria-hidden="true" tabindex="-1"></a>    <span class="at">fill =</span> Kategori), <span class="at">stat =</span> <span class="st">"identity"</span>, <span class="at">position =</span> <span class="st">"dodge"</span>) <span class="sc">+</span></span>
<span id="cb7-14"><a href="#cb7-14" aria-hidden="true" tabindex="-1"></a>    <span class="fu">scale_fill_nina</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div id="fig-barplot" class="quarto-figure quarto-figure-left quarto-float anchored" data-fig-pos="h!" data-fig-align="left">
<figure class="quarto-float quarto-float-fig figure">
<div aria-describedby="fig-barplot-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
<img src="quarto_ninareport_files/figure-html/fig-barplot-1.svg" class="img-fluid quarto-figure quarto-figure-left figure-img" data-fig-pos="h!">
</div>
<figcaption class="quarto-float-caption-bottom quarto-float-caption quarto-float-fig" id="fig-barplot-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
Figur&nbsp;1: Ett exempel med NINAs fargepalett generert fra R.
</figcaption>
</figure>
</div>
</div>
</div>
<p>Eksisterende bilder kan også legges til gjennom vanlig markdown syntax. Disse blir sentrerte. Noter at eps-filer angis uten filendelse.</p>
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="logo.png" width="400" height="200" class="figure-img"></p>
<figcaption>Nina-logoen, som eksempel på inkludering av et bilde. </figcaption>
</figure>
</div>
<p>Hvis man trenger flere muligheter for definisjon av størrelse og plassering på en ferdig bilde, kan man også inkludere den med “include_graphics”.</p>
<div class="cell" data-layout-align="left">
<div class="cell-output-display">
<div id="fig-logo_stor" class="quarto-figure quarto-figure-left quarto-float anchored" data-fig-align="left">
<figure class="quarto-float quarto-float-fig figure">
<div aria-describedby="fig-logo_stor-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
<img src="logo.png" class="quarto-figure quarto-figure-left figure-img" style="width:10cm;height:5cm">
</div>
<figcaption class="quarto-float-caption-bottom quarto-float-caption quarto-float-fig" id="fig-logo_stor-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
Figur&nbsp;2: NINA-logoen via (knitr::include_graphics) med spesifisert format.
</figcaption>
</figure>
</div>
</div>
</div>
<p>Vi kan også referere til bilder, for eksempel til <a href="#fig-logo_stor" class="quarto-xref">Figur&nbsp;2</a>, som er inkludert i mallen. Man kan referere til seksjoner ved å angi en referanse i headingen <code>{#seksjon}</code>. For eksempel refererer jeg nå til innledningen i <a href="#sec-inl" class="quarto-xref">Kapittel&nbsp;1</a>.</p>
</section>
</section>
</section>
<section id="references" class="level1" data-number="4">
<h1 data-number="4"><span class="header-section-number">4</span> Referanser</h1>
<p></p>
</section>

</main>
<!-- /main column -->
<script id="quarto-html-after-body" type="application/javascript">
window.document.addEventListener("DOMContentLoaded", function (event) {
  const toggleBodyColorMode = (bsSheetEl) => {
    const mode = bsSheetEl.getAttribute("data-mode");
    const bodyEl = window.document.querySelector("body");
    if (mode === "dark") {
      bodyEl.classList.add("quarto-dark");
      bodyEl.classList.remove("quarto-light");
    } else {
      bodyEl.classList.add("quarto-light");
      bodyEl.classList.remove("quarto-dark");
    }
  }
  const toggleBodyColorPrimary = () => {
    const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
    if (bsSheetEl) {
      toggleBodyColorMode(bsSheetEl);
    }
  }
  toggleBodyColorPrimary();  
  const icon = "";
  const anchorJS = new window.AnchorJS();
  anchorJS.options = {
    placement: 'right',
    icon: icon
  };
  anchorJS.add('.anchored');
  const isCodeAnnotation = (el) => {
    for (const clz of el.classList) {
      if (clz.startsWith('code-annotation-')) {                     
        return true;
      }
    }
    return false;
  }
  const clipboard = new window.ClipboardJS('.code-copy-button', {
    text: function(trigger) {
      const codeEl = trigger.previousElementSibling.cloneNode(true);
      for (const childEl of codeEl.children) {
        if (isCodeAnnotation(childEl)) {
          childEl.remove();
        }
      }
      return codeEl.innerText;
    }
  });
  clipboard.on('success', function(e) {
    // button target
    const button = e.trigger;
    // don't keep focus
    button.blur();
    // flash "checked"
    button.classList.add('code-copy-button-checked');
    var currentTitle = button.getAttribute("title");
    button.setAttribute("title", "Copied!");
    let tooltip;
    if (window.bootstrap) {
      button.setAttribute("data-bs-toggle", "tooltip");
      button.setAttribute("data-bs-placement", "left");
      button.setAttribute("data-bs-title", "Copied!");
      tooltip = new bootstrap.Tooltip(button, 
        { trigger: "manual", 
          customClass: "code-copy-button-tooltip",
          offset: [0, -8]});
      tooltip.show();    
    }
    setTimeout(function() {
      if (tooltip) {
        tooltip.hide();
        button.removeAttribute("data-bs-title");
        button.removeAttribute("data-bs-toggle");
        button.removeAttribute("data-bs-placement");
      }
      button.setAttribute("title", currentTitle);
      button.classList.remove('code-copy-button-checked');
    }, 1000);
    // clear code selection
    e.clearSelection();
  });
    var localhostRegex = new RegExp(/^(?:http|https):\/\/localhost\:?[0-9]*\//);
    var mailtoRegex = new RegExp(/^mailto:/);
      var filterRegex = new RegExp('/' + window.location.host + '/');
    var isInternal = (href) => {
        return filterRegex.test(href) || localhostRegex.test(href) || mailtoRegex.test(href);
    }
    // Inspect non-navigation links and adorn them if external
 	var links = window.document.querySelectorAll('a[href]:not(.nav-link):not(.navbar-brand):not(.toc-action):not(.sidebar-link):not(.sidebar-item-toggle):not(.pagination-link):not(.no-external):not([aria-hidden]):not(.dropdown-item):not(.quarto-navigation-tool)');
    for (var i=0; i<links.length; i++) {
      const link = links[i];
      if (!isInternal(link.href)) {
        // undo the damage that might have been done by quarto-nav.js in the case of
        // links that we want to consider external
        if (link.dataset.originalHref !== undefined) {
          link.href = link.dataset.originalHref;
        }
      }
    }
  function tippyHover(el, contentFn, onTriggerFn, onUntriggerFn) {
    const config = {
      allowHTML: true,
      maxWidth: 500,
      delay: 100,
      arrow: false,
      appendTo: function(el) {
          return el.parentElement;
      },
      interactive: true,
      interactiveBorder: 10,
      theme: 'quarto',
      placement: 'bottom-start',
    };
    if (contentFn) {
      config.content = contentFn;
    }
    if (onTriggerFn) {
      config.onTrigger = onTriggerFn;
    }
    if (onUntriggerFn) {
      config.onUntrigger = onUntriggerFn;
    }
    window.tippy(el, config); 
  }
  const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
  for (var i=0; i<noterefs.length; i++) {
    const ref = noterefs[i];
    tippyHover(ref, function() {
      // use id or data attribute instead here
      let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
      try { href = new URL(href).hash; } catch {}
      const id = href.replace(/^#\/?/, "");
      const note = window.document.getElementById(id);
      if (note) {
        return note.innerHTML;
      } else {
        return "";
      }
    });
  }
  const xrefs = window.document.querySelectorAll('a.quarto-xref');
  const processXRef = (id, note) => {
    // Strip column container classes
    const stripColumnClz = (el) => {
      el.classList.remove("page-full", "page-columns");
      if (el.children) {
        for (const child of el.children) {
          stripColumnClz(child);
        }
      }
    }
    stripColumnClz(note)
    if (id === null || id.startsWith('sec-')) {
      // Special case sections, only their first couple elements
      const container = document.createElement("div");
      if (note.children && note.children.length > 2) {
        container.appendChild(note.children[0].cloneNode(true));
        for (let i = 1; i < note.children.length; i++) {
          const child = note.children[i];
          if (child.tagName === "P" && child.innerText === "") {
            continue;
          } else {
            container.appendChild(child.cloneNode(true));
            break;
          }
        }
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(container);
        }
        return container.innerHTML
      } else {
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(note);
        }
        return note.innerHTML;
      }
    } else {
      // Remove any anchor links if they are present
      const anchorLink = note.querySelector('a.anchorjs-link');
      if (anchorLink) {
        anchorLink.remove();
      }
      if (window.Quarto?.typesetMath) {
        window.Quarto.typesetMath(note);
      }
      // TODO in 1.5, we should make sure this works without a callout special case
      if (note.classList.contains("callout")) {
        return note.outerHTML;
      } else {
        return note.innerHTML;
      }
    }
  }
  for (var i=0; i<xrefs.length; i++) {
    const xref = xrefs[i];
    tippyHover(xref, undefined, function(instance) {
      instance.disable();
      let url = xref.getAttribute('href');
      let hash = undefined; 
      if (url.startsWith('#')) {
        hash = url;
      } else {
        try { hash = new URL(url).hash; } catch {}
      }
      if (hash) {
        const id = hash.replace(/^#\/?/, "");
        const note = window.document.getElementById(id);
        if (note !== null) {
          try {
            const html = processXRef(id, note.cloneNode(true));
            instance.setContent(html);
          } finally {
            instance.enable();
            instance.show();
          }
        } else {
          // See if we can fetch this
          fetch(url.split('#')[0])
          .then(res => res.text())
          .then(html => {
            const parser = new DOMParser();
            const htmlDoc = parser.parseFromString(html, "text/html");
            const note = htmlDoc.getElementById(id);
            if (note !== null) {
              const html = processXRef(id, note);
              instance.setContent(html);
            } 
          }).finally(() => {
            instance.enable();
            instance.show();
          });
        }
      } else {
        // See if we can fetch a full url (with no hash to target)
        // This is a special case and we should probably do some content thinning / targeting
        fetch(url)
        .then(res => res.text())
        .then(html => {
          const parser = new DOMParser();
          const htmlDoc = parser.parseFromString(html, "text/html");
          const note = htmlDoc.querySelector('main.content');
          if (note !== null) {
            // This should only happen for chapter cross references
            // (since there is no id in the URL)
            // remove the first header
            if (note.children.length > 0 && note.children[0].tagName === "HEADER") {
              note.children[0].remove();
            }
            const html = processXRef(null, note);
            instance.setContent(html);
          } 
        }).finally(() => {
          instance.enable();
          instance.show();
        });
      }
    }, function(instance) {
    });
  }
      let selectedAnnoteEl;
      const selectorForAnnotation = ( cell, annotation) => {
        let cellAttr = 'data-code-cell="' + cell + '"';
        let lineAttr = 'data-code-annotation="' +  annotation + '"';
        const selector = 'span[' + cellAttr + '][' + lineAttr + ']';
        return selector;
      }
      const selectCodeLines = (annoteEl) => {
        const doc = window.document;
        const targetCell = annoteEl.getAttribute("data-target-cell");
        const targetAnnotation = annoteEl.getAttribute("data-target-annotation");
        const annoteSpan = window.document.querySelector(selectorForAnnotation(targetCell, targetAnnotation));
        const lines = annoteSpan.getAttribute("data-code-lines").split(",");
        const lineIds = lines.map((line) => {
          return targetCell + "-" + line;
        })
        let top = null;
        let height = null;
        let parent = null;
        if (lineIds.length > 0) {
            //compute the position of the single el (top and bottom and make a div)
            const el = window.document.getElementById(lineIds[0]);
            top = el.offsetTop;
            height = el.offsetHeight;
            parent = el.parentElement.parentElement;
          if (lineIds.length > 1) {
            const lastEl = window.document.getElementById(lineIds[lineIds.length - 1]);
            const bottom = lastEl.offsetTop + lastEl.offsetHeight;
            height = bottom - top;
          }
          if (top !== null && height !== null && parent !== null) {
            // cook up a div (if necessary) and position it 
            let div = window.document.getElementById("code-annotation-line-highlight");
            if (div === null) {
              div = window.document.createElement("div");
              div.setAttribute("id", "code-annotation-line-highlight");
              div.style.position = 'absolute';
              parent.appendChild(div);
            }
            div.style.top = top - 2 + "px";
            div.style.height = height + 4 + "px";
            div.style.left = 0;
            let gutterDiv = window.document.getElementById("code-annotation-line-highlight-gutter");
            if (gutterDiv === null) {
              gutterDiv = window.document.createElement("div");
              gutterDiv.setAttribute("id", "code-annotation-line-highlight-gutter");
              gutterDiv.style.position = 'absolute';
              const codeCell = window.document.getElementById(targetCell);
              const gutter = codeCell.querySelector('.code-annotation-gutter');
              gutter.appendChild(gutterDiv);
            }
            gutterDiv.style.top = top - 2 + "px";
            gutterDiv.style.height = height + 4 + "px";
          }
          selectedAnnoteEl = annoteEl;
        }
      };
      const unselectCodeLines = () => {
        const elementsIds = ["code-annotation-line-highlight", "code-annotation-line-highlight-gutter"];
        elementsIds.forEach((elId) => {
          const div = window.document.getElementById(elId);
          if (div) {
            div.remove();
          }
        });
        selectedAnnoteEl = undefined;
      };
        // Handle positioning of the toggle
    window.addEventListener(
      "resize",
      throttle(() => {
        elRect = undefined;
        if (selectedAnnoteEl) {
          selectCodeLines(selectedAnnoteEl);
        }
      }, 10)
    );
    function throttle(fn, ms) {
    let throttle = false;
    let timer;
      return (...args) => {
        if(!throttle) { // first call gets through
            fn.apply(this, args);
            throttle = true;
        } else { // all the others get throttled
            if(timer) clearTimeout(timer); // cancel #2
            timer = setTimeout(() => {
              fn.apply(this, args);
              timer = throttle = false;
            }, ms);
        }
      };
    }
      // Attach click handler to the DT
      const annoteDls = window.document.querySelectorAll('dt[data-target-cell]');
      for (const annoteDlNode of annoteDls) {
        annoteDlNode.addEventListener('click', (event) => {
          const clickedEl = event.target;
          if (clickedEl !== selectedAnnoteEl) {
            unselectCodeLines();
            const activeEl = window.document.querySelector('dt[data-target-cell].code-annotation-active');
            if (activeEl) {
              activeEl.classList.remove('code-annotation-active');
            }
            selectCodeLines(clickedEl);
            clickedEl.classList.add('code-annotation-active');
          } else {
            // Unselect the line
            unselectCodeLines();
            clickedEl.classList.remove('code-annotation-active');
          }
        });
      }
  const findCites = (el) => {
    const parentEl = el.parentElement;
    if (parentEl) {
      const cites = parentEl.dataset.cites;
      if (cites) {
        return {
          el,
          cites: cites.split(' ')
        };
      } else {
        return findCites(el.parentElement)
      }
    } else {
      return undefined;
    }
  };
  var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
  for (var i=0; i<bibliorefs.length; i++) {
    const ref = bibliorefs[i];
    const citeInfo = findCites(ref);
    if (citeInfo) {
      tippyHover(citeInfo.el, function() {
        var popup = window.document.createElement('div');
        citeInfo.cites.forEach(function(cite) {
          var citeDiv = window.document.createElement('div');
          citeDiv.classList.add('hanging-indent');
          citeDiv.classList.add('csl-entry');
          var biblioDiv = window.document.getElementById('ref-' + cite);
          if (biblioDiv) {
            citeDiv.innerHTML = biblioDiv.innerHTML;
          }
          popup.appendChild(citeDiv);
        });
        return popup.innerHTML;
      });
    }
  }
});
</script>
</div> <!-- /content -->




</body></html>